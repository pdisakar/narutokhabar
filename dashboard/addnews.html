<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add New Image</title>
    <link rel="stylesheet" href="../backend/asstes/style.css" />
  </head>
  <body>
    <h2>Add News</h2>
    <div class="page-container">
      <form action="#" class="form">
        <div class="avatar">
          <input
            type="file"
            id="avatarImageUpload"
            name="avatarImageUpload"
            accept="image/*"
            style="display: none"
          />

          <img
            class="upload-img"
            src="../backend/source/upload-img.png"
            id="avatarImage"
          />
          <label for="avatarImageUpload">Choose Avatar</label>
        </div>
        <div class="general-info">
          <!-- Unique ID for the general info file input -->
          <input
            type="file"
            id="generalImageUpload"
            name="generalImageUpload"
            accept="image/*"
            style="display: none"
          />

          <div class="name-container">
            <label for="name">News Title:</label>
            <input type="text" class="name" id="name" />
          </div>
          <div class="news-title-container">
            <label for="news-title">Enter Dated</label>
            <input type="date" class="news-title" id="news-title" />
          </div>
        </div>
        <div class="news-discription-container">
          <label for="news-discription">Enter News Discription:</label>
          <textarea name="news-discription" id="news-discription"></textarea>
        </div>

        <div class="button-wrap">
          <button class="button">Submit</button>
          <button class="button">Discard</button>
        </div>
      </form>
    </div>

    <script>
      document
        .getElementById("avatarImage")
        .addEventListener("click", function () {
          document.getElementById("avatarImageUpload").click();
        });

      document
        .getElementById("avatarImageUpload")
        .addEventListener("change", function () {
          var fileInput = this;
          var avatarImage = document.getElementById("avatarImage");

          if (fileInput.files && fileInput.files[0]) {
            if (!fileInput.files[0].type.startsWith("image/")) {
              alert("Please upload a valid image file.");
              fileInput.value = "";
              return;
            }

            var reader = new FileReader();

            reader.onload = function (e) {
              avatarImage.src = e.target.result;
            };
            reader.readAsDataURL(fileInput.files[0]);
          }
        });

      document
        .querySelector(".button-wrap .button:last-child")
        .addEventListener("click", function () {
          document.getElementById("name").value = "";
          document.getElementById("news-title").value = "";
          document.getElementById("news-discription").value = "";

          document.getElementById("avatarImage").src =
            "../backend/source/upload-img.png";

          document.getElementById("avatarImageUpload").value = "";

          document.getElementById("generalImage").src =
            "../backend/source/default-img.png";

          document.getElementById("generalImageUpload").value = "";
        });
    </script>
  </body>
</html>
